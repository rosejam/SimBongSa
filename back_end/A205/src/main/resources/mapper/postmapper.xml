<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.a205.model.postmapper">
	<select id="select" resultType="post" parameterType="int">
		select * from post
		<if test="value!=null">
			where no = #{id}
		</if>
		order by no desc;
	</select>
	<select id="searchByCondition" resultType="post"
		parameterType="hashmap">
		select * from post
		<where>
			<choose>
				<when test="condition=='title'">
					title like #{key}
				</when>
				<when test="condition== 'content'">
					content like #{key}
				</when>

				<otherwise>
					
				</otherwise>

			</choose>
		</where>
	</select>



	<update id="update" parameterType="post">
		update post set
		title =#{title},
		content=#{content}
		where no=#{no}
	</update>

	<delete id="delete" parameterType="int">
		delete from post where
		no=#{id}
	</delete>

	<insert id="insert" parameterType="post">
		insert into
		post(id,title,content)
		values(#{id}, #{title},#{content} )
	</insert>


	<select id="getViewCnt" parameterType="int">
		select viewcnt from post
		where no = #{id}
	</select>


	<update id="addViewCnt" parameterType="int">
		update post
		set
		viewcnt=viewcnt+1
		where no = #{id}
	</update>


	<select id="getBoardList" resultType="post">
		SELECT * FROM post
		ORDER BY no DESC
		LIMIT #{startList}, #{listSize}
	</select>
	
	<select id="getBoardListCnt" resultType="int">

		SELECT
			count(*) as listCnt
		FROM
			post

	</select>
</mapper>