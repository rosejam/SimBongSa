<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.a205.model.postmapper">

	<select id="selectOne" resultType="post" parameterType="int">
		select * from post
		where p_id = #{p_id}
	</select>
	
	<!-- 포스트 검색?? -->
	<select id="searchByCondition" resultType="post" parameterType="java.util.Map">
		select * from post
		<where>
			<choose>
				<when test="condition=='title'">
					title like #{key}
				</when>
				<when test="condition=='content'">
					content like #{key}
				</when>
				<otherwise>
					
				</otherwise>
			</choose>
		</where>
	</select>

	<update id="update" parameterType="post">
		update post set
		p_content = #{p_content},
		p_img = #{p_img}
		where p_id = #{p_id}
	</update>

	<delete id="delete" parameterType="int">
		delete from post
		where p_id = #{p_id}
	</delete>

	<insert id="insert" parameterType="post">
		insert into
		post(m_id, v_id, p_img, p_content, p_status)
		values(#{m_id}, #{v_id}, #{p_img}, #{p_content}, #{p_status})
	</insert>

<!-- 	<select id="getViewCnt" parameterType="int">
		select viewcnt from post
		where no = #{id}
	</select>


	<update id="addViewCnt" parameterType="int">
		update post
		set
		viewcnt=viewcnt+1
		where no = #{id}
	</update>


	<select id="getBoardList" resultType="post">
		SELECT * FROM post
		ORDER BY no DESC
		LIMIT #{startList}, #{listSize}
	</select>
	
	<select id="getBoardListCnt" resultType="int">

		SELECT count(*) as listCnt
		FROM post

	</select> -->
</mapper>